// Generated by CoffeeScript 1.7.1
(function() {
  var SIZE, wall, wall_id;

  if (!String.prototype.trim) {
    String.prototype.trim = function() {
      return this.replace(/^\s+|\s+$/g, "");
    };
  }

  wall_id = null;

  wall = {};

  SIZE = 5;

  window.main = {
    initialize: function(id) {
      return this.load(id);
    },
    wall_url: function(id) {
      return "/walls/" + id + ".json";
    },
    load: function(id) {
      return $.get(this.wall_url(id), function(data) {
        wall = data.wall;
        way.set("wall", wall);
        wall_id = id;
        $("body").css("background-image", "url(" + wall.background_image_url + ")");
        return main.draw(0);
      });
    },
    draw: function(start) {
      var current;
      current = wall.messages.slice(start, start + SIZE);
      if (current.length > 0) {
        way.set("messages", current);
        return setTimeout(function() {
          return main.draw(start + SIZE);
        }, 2000);
      } else {
        return setTimeout(function() {
          return main.load(wall_id);
        }, 2000);
      }
    }
  };

}).call(this);
